/*
 ********************************************************************************
 *		$Workfile: CIP_Ctrl_Spvsr.cpp$
 *
 *		$Author: Mark A Verheyen$
 *		$Date: 3/5/2009 8:49:08 AM$
 *		Copyright© 2001-2004, Eaton Corporation. All Rights Reserved.
 *
 *		$Header: CIP_Ctrl_Spvsr.h, 22, 3/5/2009 8:49:08 AM, Mark A Verheyen$
 ********************************************************************************
 */
#include "Includes.h"
#include "CIP_Ctrl_Spvsr.h"
#include "EIP_Obj_Svc.h"

/*
 ********************************************************************************
 *		Constants
 ********************************************************************************
 */

/*
 ********************************************************************************
 *		Variables
 ********************************************************************************
 */
static CIP_CTRL_SUP_RESET_CBACK* m_reset_cback;
static CIP_CTRL_SUP_RESET_PARAM m_reset_param;

/*
 ********************************************************************************
 *		Prototypes
 ********************************************************************************
 */
static bool_t CIP_CTRL_SPVSR_Execute(
	EIP_OBJ_SVC_CBPARAM param,
	EtIPObjectRequest* request,
	EtIPObjectResponse* response );

static EIP_OBJ_SVC_DEF cip_ctrl_spvsr_reset =
{
	0x05U,
	0x29U,
	0x01U,
	&CIP_CTRL_SPVSR_Execute,
	static_cast<EIP_OBJ_SVC_CBPARAM>( NULL )
};

/*
 ********************************************************************************
 * ----- Function Header --------------------------------------------------------
 * ------------------------------------------------------------------------------
 * ------------------------------------------------------------------------------
 * ------------------------------------------------------------------------------
 * ------------------------------------------------------------------------------
 ********************************************************************************
 */
void CIP_CTRL_SPVSR_Init( CIP_CTRL_SUP_RESET_CBACK* cback,
						  CIP_CTRL_SUP_RESET_PARAM param )
{
	m_reset_cback = cback;
	m_reset_param = param;

	EIP_OBJ_SVC_Attach( &cip_ctrl_spvsr_reset );
}

/*
 ********************************************************************************
 * ----- Function Header --------------------------------------------------------
 * ------------------------------------------------------------------------------
 * ------------------------------------------------------------------------------
 * ------------------------------------------------------------------------------
 * ------------------------------------------------------------------------------
 ********************************************************************************
 */
static bool_t CIP_CTRL_SPVSR_Execute(
	EIP_OBJ_SVC_CBPARAM param,
	EtIPObjectRequest* request,
	EtIPObjectResponse* response )
{
	param = param;
	request = request;
	response = response;
	( *m_reset_cback )( m_reset_param, true );
	return ( true );
}
